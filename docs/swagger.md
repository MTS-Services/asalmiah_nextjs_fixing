### Swagger doc

##### How to implement swagger in existing project?

###### Install Dependencies for swagger

`npm i swagger-ui-express -S`
`npm i swagger-autogen -S`

###### To access swagger  enter your IP ADDRESS with host in (SWAGGER_SERVER_IP = <Your IP ADDRESS>:3025) in .env file
###### Create a new folder config at the root and add swaggerConfig.js file in under config folder

###### Open the swaggerConfig.js file and add below code

const swaggerAutogen = require("swagger-autogen")();

const process = require("process");
require("dotenv").config();
const doc = {
  info: {
    version: "1.0.0",
    title: "My API",
    description:
      "Documentation automatically generated by the <b>swagger-autogen</b> module.",
  },
  host: process.env.SWAGGER_SERVER_IP,
  basePath: "/",
  schemes: ["http", "https"],
  consumes: ["application/json"],
  produces: ["application/json"],
  tags: [
    {
      name: "User",
      description: "Endpoints",
    },
  ],
  securityDefinitions: {
    Bearer: {
      type: "apiKey",
      name: "Authorization",
      in: "header",
      description:
        "Enter your bearer token in the format **Bearer &lt;token>**",
    },
  },
};

const swaggerJsonfile = "../swagger.json";
const swaggerEndpointsFiles = ["../routes/swaggerRoutes"];

swaggerAutogen(swaggerJsonfile, swaggerEndpointsFiles, doc).then(() => {
  require("../app.js"); // Your project's root file
});

	

##### Open the app.js file and add the below code for swagger integration

```javascript
const swaggerUi = require('swagger-ui-express')
const swaggerFile = require('./swagger.json')


app.use(
  '/api-docs',
  swaggerUi.serve, 
  swaggerUi.setup(swaggerFile)
);
```

##### Create swaggerRoutes.js in under routes folder and write your swagger routes
Example:

let expression = true;

module.exports = function (app) {
  /**
   * User routes Start
   *
   */

  /*
   NOTE: Completing informations automaticaly obtaineds */
  /*
    START USER ROUTE
  */

  /*POST API signup*/

  app.post("/auth/registration", (req, res) => {
    res.setHeader("Content-Type", "application/xml");
    /*  #swagger.tags = ['AUTH']
                #swagger.description = 'Endpoint to signup a user.' */
                #swagger.security = [{ "Bearer": [] }] */

    /*  #swagger.parameters['obj'] = {
               in: 'body',
               description: 'Some description...',
               schema: {
                      $email: "",
                      $password: ""
                      
               }
       } */

    if (expression) {
      // #swagger.responses[201] = { description: 'User singup successfully.' }
      return res.status(201).send(data);
    }
    return res.status(500);
  });
  
};

##### Add scripts in package.json 
"start-gendoc": "node ./config/swaggerConfig.js"
##### Run command <npm run start-gendoc>  to generate swagger API docs in swagger.json file

##### Now Open the browser with http://<YOUR IP ADDRESS>:3025/api-docs/

> If you struggle implementing the auth token please refer to this [doc](https://stackoverflow.com/questions/64144328/nodejs-swagger-unable-to-add-authorization-header-to-requests "doc")

